<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Other Info</title>
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script>
           google.charts.load('current', {'packages':['corechart']});
           google.charts.setOnLoadCallback(drawAllSheets);
      function drawAllSheets() {
        drawSheetName('top_5', 'SELECT A, B', 
            slResponseHandler);
        drawSheetName('top_5', 'SELECT A, C', 
            ilResponseHandler);
        drawSheetName('top_5', 'SELECT A, D', 
            glResponseHandler);
        drawSheetName('top_5', 'SELECT A, E', 
            syResponseHandler);
        drawSheetName('top_5', 'SELECT A, F', 
            buResponseHandler);
        drawSheetName('top_5', 'SELECT A, G', 
            togoResponseHandler);
        };

      function drawSheetName(sheetName, query, responseHandler){
        var queryString = encodeURIComponent(query);
        var query = new google.visualization.Query("https://docs.google.com/spreadsheets/d/1o9AeiL9ip_xrXrLtA-x2QM3RZHhT1mRJ6ILdnXhjAx0/gviz/tq?sheet="+ sheetName + "&headers=1&tq=" + queryString);
        query.send(responseHandler);
        };

      function slResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Switzerland',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("sl_div"));
          chart.draw(data,options);
        }

      function ilResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Iceland',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("il_div"));
          chart.draw(data,options);
        }

      function glResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Greenland(Denmark)',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("gl_div"));
          chart.draw(data,options);
        }

      function syResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Syria',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("sy_div"));
          chart.draw(data,options);
        }
      
      function buResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Burundi',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("bu_div"));
          chart.draw(data,options);
        }
      
      function togoResponseHandler(response){
          var data = response.getDataTable();
          data.sort({column:0, desc:true});

          var options = {height:400,
                          title:'Togo',
                          is3D: true
                        };

          var chart = new google.visualization.PieChart(document.getElementById("togo_div"));
          chart.draw(data,options);
        }

      
    </script>
    
</head>
<body>
    <div id="main">
        <div id="header">
            <div id="logo">
              <div class="transbox">
                <h1><strong><center> The World Happniess Report </center></strong></h1>
              </div>
            </div>
            <div id="menubar">
                <ul id="menu">
                  <li><a href="index.html"><i class="fa fa-home"></i>Home</a></li>
                  <li><a href="world_rank.html"><i class="fa fa-globe"></i> World Rank</a></li>
                  <li><a href="region.html"><i class="fa fa-map-marker"></i> Region Rank</a></li>
                  <li><a href="average.html"><i class="fa fa-bar-chart"></i> Average</a></li>
                  <li class="selected"><a href="interesting.html"><i class="fa fa-pie-chart"></i> Other Info</a></li>
                </ul><!-- menu -->
            </div><!-- menubar -->
        </div><!-- header-->
        <div id="content">
        <div class="services container">
            <h1><i class="fa fa-level-up" aria-hidden="true"></i> Top 3 Countries All Factors Proportion</h1>
            <button class="accordion">Analysis</button>

            <div class="panel">
              <p>
                Happiness score is sum of all seven factors’ score. Therefore, using the pie chart we can see the ratio of each factor. 
                In the top 3 countries, Dystopia Residual takes more 30% of happiness score; opposite, trust and generosity take the 
                least percentage. Other than Dystopia, economy and family take large proportion in happiness score, which means when 
                people earn more money and have greater warmth of family, they feel happier and satisfier. However, trust and generosity 
                do not affect happiness score that much. 
                <br>
                <br>
                In the bottom 3 countries, most of factors of Syria takes similar proportion in happiness score but trust and freedom. 
                Burundi and Togo have more than 50% of dystopia residual, and economy of Burundi only takes 0.5% of happiness. 
                After we exclude dystopia, the highest percentage of Syria is health, Burundi is family and Togo is freedom. 
                However, these three countries are having the lowest happiness score which means their people do not satisfy their life 
                due to their countries’ situation (such as civil war), even they have freedom, warmth of family or good health. 
                
                </p>
            

            </div>
          
        
            <div id = "sl_div" style="width:850px; height:500px"></div>
            <div id = "il_div" style="width:850px; height:500px"></div>
            <div id = "gl_div" style="width:850px; height:500px"></div>

            <h1><i class="fa fa-level-down" aria-hidden="true"></i> Bottom 3 Countries All Factors Proportion</h1>
            <div id = "sy_div" style="width:850px; height:500px"></div>
            <div id = "bu_div" style="width:850px; height:500px"></div>
            <div id = "togo_div" style="width:850px; height:500px"></div>

        </div><!-- services_container -->
      </div>
        <div id="footer">   
            Copyright&copy;
            <script>
                var d= new Date();
                document.write(d.getFullYear());
            </script>
            | <a href="https://www.linkedin.com/in/chengzeng92/">Linkedin</a>
            | <a href="mailto:czeng@gwmail.gwu.com">Contact US</a>
            | Create by- Cheng Zeng (Jane)
        </div><!-- footer -->
    </div><!-- main -->
<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/script.js"></script>
<script>
  var acc = document.getElementsByClassName("accordion");
  var i;
  
  for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var panel = this.nextElementSibling;
      if (panel.style.maxHeight) {
        panel.style.maxHeight = null;
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
      } 
    });
  }
  </script>
</body>
</html>